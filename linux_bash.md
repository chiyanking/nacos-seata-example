shell编程学习总结
一、编译型和解释型语言：

    计算机不能直接理解高级语言，只能直接理解机器语言，所以必须要把高级语言翻译成机器语言，计算机才能执行高级语言编写的程序。

     翻译的方式有两种，一个是编译，一个是解释。两种方式只是翻译的时间不同。

     编译型语言写的程序执行之前，需要一个专门的编译过程，把程序编译成为机器语言的文件，比如exe文件，以后要运行的话就不用重新翻译了，直接使用编译的结果就行了（exe文件），因为翻译只做了一次，运行时不需要翻译，所以编译型语言的程序执行效率高。

    解释则不同，解释型语言的程序不需要编译，省了道工序，解释性语言在运行程序的时候才翻译，比如解释性basic语言，专门有一个解释器能够直接执行basic程序，每个语句都是执行的时候才翻译。这样解释性语言每执行一次就要翻译一次，效率比较低。（shell script用shell解释）

二、shell：提供了我们和操作系统之间的通讯；是一个命令解释器，它通过接受用户输入的命令来启动、暂停、停止程序的运
             行或对计算机进行控制。
   （1）交互式shell
   （2）非交互式shell：shell script
三、shell script：本质上，shell script是命令行命令简单地组合到一个文件里面。shell一条接着一条的解释并执行shell脚本中的命令。
   脚本中的内容：
   （1）可以是用户在shell提示符后面输入的任何命令。
        A：可以运行某个linux程序、编译过的程序后者是另一个shell脚本；
        B：脚本中的命令可以引用任意文件，并可以有自己的输入和输出。
   （2）除了使用命令之外，脚本中还可以使用控制流（if语句、for语句等）命令。
四、shell编程基础知识
1。shell的特殊符号
（1）通配符：＊，？，［］，！
    [ ]（一对方括号）其中有一个字符集合：其作用是匹配该字符组所限定的任何一个字符
    !（惊叹号），如果它紧跟在一对方括号的左方括号（[）之后，则表示不在一对方括号中所列出的字符。
（2）引号：“”，‘’，｀｀。
    双引号：由双引号括起来的字符（除$、倒引号（`）和反斜线（\）外）均作为普通字符对待。
    单引号：由单引号括起来的字符都作为普通字符出现
    倒引号：倒引号括起来的字符串被shell解释为命令行，在执行时，shell会先执行该命令行，并以它的标准输出结果取 代整个倒引号部分。
（3）输入／输出重定向符号
     输入重定向符： 命令 < 文件名       
    $  score < file1
     输出重定向符：命令 > 文件名        
    $ ls > abc
（4）注释，管道
     注释符：＃
     管道（｜）：可以实现将一个命令的输出当作另一个命令的输入。
（5）成组命令：｛｝，（）
    { }形式：以花括号括起来的全部命令可视为语法上的一条命令，出现在管道符的一边。
    $ {  echo  “User  Report  for  ` date ` . ”; who ; } | pr
   
   [＊＊＊ 特别注意:左括号 “{ ”后面应有一个空格;右括号“}”之前应有一个分号（ ；）＊＊＊］

   ( )形式：
    (echo  "Current  directory  is  ` pwd ` . "
    cd  /home/mengqc ;  ls -l ;
    cp  m1  em1 && rm  m1
    cat  em1) | pr
    
2。变量
（1）用户自己定义的变量：变量名是以下划线或者字母开头的字母、数字、下划线的字符序列；字母区分大小写。
   A：定义和赋值的格式为：变量名＝字符串  (注意："="两边不要留有空格）
     如：name＝lsx 
       name＝“liu shao xian“
   B：用命令结果给变量赋值
       ｀命令表｀
        $（命令表）
     如：dir＝｀pwd｀（倒引号）等价于 dir＝$（pwd）
         $(pwd ; cd  /home/mengqc ; ls  -d)
（2）数组：定义一个数组并为其赋初值的一般形式是：
            数组名=(值1  值2  …  值n)
            其中，各个值之间以空格分开。
     对数组元素赋值的一般形式是：  数组名[下标]＝值
     读取数组元素值的一般格式是：  ${数组名[下标]}
（3）常用的环境变量：
   HOME：用户主目录的全路径名
   LOGNAME：用户注册名，由Linux自动设置
   MAIL：用户信箱的路径
   PATH：shell从中查找命令的目录列表。
   PS1：shell的主提示符。  bash默认的主提示符一般为“\s-\v\$ ”。其中,\s表示shell的名称；\v表示bash的版本号。    
   PWD：当前工作目录的路径
   SHELL：当前使用的shell
   TERM：终端类型
   环境变量的引用，如：PATH=$PATH:$HOME/bin
（4）特殊预设变量
    $#：命令行上参数的个数，但不包含shell脚本名本身。
    $?：上一条命令执行后的返回值，它是一个十进制数。
    $$ ：当前进程的进程号。
    $!：上一个后台命令对应的进程号，这是一个由1~5位数字构成的数字串。
    $*：表示在命令行中实际给出的所有实参字符串，它并不仅限于9个实参。
    $@： 它与$*基本功能相同，即表示在命令行中给出的所有实参。但“$@”表示拆分的字符串数组，而“$*”表示一个完整的字符串。
    $<：（？？？？？？？）
（5）位置变量
     位置的变量，其名称为1，2，3，……
     位置参数的引用：$1,……，${10}
     通过命令行上对对应位置参数赋值
     用set命令为位置参数赋值
     $0始终代表命令名或shell脚本名
   shift命令：移动位置参数，shift n，就是把命令行上的实参向左移动一位。
（6）变量引用的形式
    A：引用变量值：在变量名前加“$”
    B：如果变量值须出现在长字符串的开头或者中间，为了使变量名与其后的字符区分开，则应该用花括号将该变量名括起来。(还可以使用双引号，如：“$name"nd,等价于${name}nd)
    C：常用的有效的引用形式如下：
   $name                ${name#pattern}
   ${name}              ${name##pattern}
   ${name[n]}            ${name % pattern}
   ${name[*]}            ${name %% pattern}
   ${name [@]}           ${#@}
   ${name:-word}         ${$#*}
   ${name:=word}         ${# name }
   ${name:?word}         ${# name[*]}
   ${name:+word}         ${#name[@]}
3。算术运算
（1）算术运算的命令是：let
（2）let 命令的替代形式： ((算术表达式))
（3）在算术表达式中直接利用名称访问参数，不需要带有“$”符号
（4）例子：i=2
        j＝3
        let “j=i*6+2”   等价于： ((j=i*6+2))
4。控制结构
（1）if语句
     if语句用于条件控制结构中，其一般格式为：
      if  测试条件
          then  命令1
          else  命令2
      fi
     ＊＊＊测试条件三种常用形式＊＊＊
(条件测试是高级语言所不具备的，这是shell的一个特点。主要包括三个方面：文件测试、字符串测试和算术式。在字符串测试中“＝”两边要留有空格字符)
     test指令：test  -f  "$1"
       方括号：[  -f  "$1"  ］ （注意“［”后要加空格，“］”前也要加空格）
       条件表达式： [[条件表达式]]
（2）case语句
      case语句允许进行多重条件选择，其一般格式为：
        case 字符串  in
              模式字符串1）  命令组1;;
        模式字符串2）  命令组2;;
            …
              模式字符串n） 命令组n;;
      esac
   （注意： A：每个模式字符串后面可有一条或多条命令，其最后一条命令必须以两个分号(即;;)结束。
      B：模式字符串中可以包含多个模式，各模式之间应以竖线（|）隔开，只要给定字符串与其中一个模式相配，就会执行
            其后的命令表。）
（3）while语句
    格式为：  while  测试条件 
             do
                          命令表
             done
（4）until语句
     其格式为：
             until   测试条件
                do
                             命令表
               done
   （注意：它与while语句很相似，只是测试条件不同：当测试条件为假时，才进入循环体，直至测试条件为真时终止循环）
（5）for语句
     A：值表方式
    for 变量 [ in 值表 ]；
    do
        命令表；
    done
     B：算术表达式方式
      for ((e1;e2;e3))
     do
        命令表
     done
（6）select语句：通常用于菜单的设计，它自动完成接收用户输入的整个过程，包括显示一组菜单项以及读入用户的选择
      其语法格式为：
     select identifier [in  word…]
           do
                  命令表
           done
      （注意：如果in word…这一部分被省略，那么参数identifier就以位置参数（$1, $2, …）作为给定的值。）
（7）break、continue、exit命令的使用，它们的语法格式如下：
     break ［n］
     continue ［n］
     exit ［n］
5。函数
（1）函数的定义格式为：
      函数名( )
      { 
          命令表
      }
（2）调用函数时，直接利用函数名，如showfile，不必带圆括号。
6。shell内置命令
     通过对上面知识的掌握，可以利用、结合变量（多种变量）、算术表达式、流控制结构、函数等编写出能实现一定功能的
脚本；除了使用上面的知识外，在编写脚本的过程中，还可以直接使用shell的内置命令，比如：break [ n ], continue [ n ], cd , echo, exit [ n ] , export, pwd, read, return [ n ] ,  set, shift [ n ] , test, bg, fg, kill等 。（？？？？？？？？）
五、简单的例子
六、脚本调试方法
1。编写的脚本无法执行的原因除脚本文件缺少“执行”权限外，有两种可能：执行脚本的环境设置不对和脚本本身有错误。
2。解决环境设置的问题
（1） 不能直接在其他shell下运行bash脚本，解决的办法是在脚本的第一行写上：#!/bin/bash
（2）在PATH环境变量中没有包括“.”（当前工作目录）。
    解决办法是设置PATH：PATH=$PATH:.
（3）脚本文件与已存在命令的名字相同。 
3。解决脚本错误的问题
（1）使用set命令打开-x选项，或者在启动shell时使用-x选项将shell设置成跟踪模式。
    A：如果脚本"strangescript"出错，可以使用这个命令进行调试：sh -x strangescript
         上述命令会执行该脚本，同时显示所有变量的值。

    B:shell还有一个不执行脚本只检查语法的模式，命令如下：sh -n your_script
（2）使用echo命令,可以在任何怀疑出错的地方用echo打印变量值 。
七、其他
1。（1）程序会扩展通配符和变量，以使用引号来防止这种扩展。如：
   #!/bin/sh

   echo "*.jpg"
   echo '*.jpg'

   其运行结果为：

  *.jpg
  *.jpg
（2）其中单引号更严格一些，它可以防止任何变量扩展；而双引号可以防止通配符扩展但允许变量扩展：

#!/bin/sh

echo $SHELL
echo "$SHELL"
echo '$SHELL'

运行结果为：

/bin/bash
/bin/bash
$SHELL

（3）还有一种防止这种扩展的方法，即使用转义字符——反斜杆:\：

echo \*.jpg
echo \$SHELL

输出结果为：

*.jpg
$SHELL

2.创建一个如下的shell script：
date
pwd
cd  ..
其执行结果如下：
xiyoulinux@xiyoulinux-desktop:~/lsx$ bash test1.sh
2009年 07月 28日 星期二 09:26:16 CST
/home/xiyoulinux/lsx
xiyoulinux@xiyoulinux-desktop:~/lsx$ （结果显示更改不了目录路径，权限不足）
3。echo参数：
（1）－n  ：  显示信息完后光标不换行
（2）－e  ：  支持扩展字符的使用，比如在echo语句中存在“\n“的话，加了这个参数，才能识别为换行字符，要不将原样打印显示出来。
4。stty：改变终端特性。
（1）stty使用程序检查并设置终端的特性。
（2）元字符：所有的终端有以特殊方式处理特定字符的能力，这些特定字符称为元字符
（3）stty －a 列出终端当前的设置
stty －echo 不要辉县输入的字符
stty echo 回显输入的字符
stty －raw 启用元字符的特殊含义
stty  raw 金庸元字符的特殊含义
stty sane  设置终端特性为合理的默认值

stty erase  后退一个字符
(4)可以通过在元字符字符串后面跟随新值来设置元字符的映射。在字符前面加上一个^或者在实际的控制字符前输入\.
如： stty erase ^b :set erase key to control-b
(这时候使用backspace键时输出的是原始erase的值，比如原始的erase＝^?,
那么按backspace键时，显示的是^?,这时要删除一个字符的话，要按control－b组合键。）
5。在算术表达式中直接利用名称访问命名的参数，不要前面带有“$”符号。
6。echo 和 read命令的常用性。
